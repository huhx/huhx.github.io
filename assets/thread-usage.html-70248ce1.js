import{_ as p,r as e,o,c,a as n,b as s,e as l,d as a}from"./app-57542e83.js";const i={},u=a(`<p>åœ¨ä¸Šä¸€ç¯‡åšå®¢æˆ‘ä»¬è®²åˆ°ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥ç®€å•çš„ä»‹ç»ä¸‹çº¿ç¨‹çš„ä½¿ç”¨ã€‚</p><h2 id="çº¿ç¨‹çš„åˆ›å»º" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹çš„åˆ›å»º" aria-hidden="true">#</a> çº¿ç¨‹çš„åˆ›å»º</h2><p>çº¿ç¨‹çš„åˆ›å»ºæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯<code>ç»§æ‰¿Threadç±»</code>ï¼Œå¦ä¸€ç§æ˜¯<code>å®ç°Runnableæ¥å£</code>ã€‚æ¯”è¾ƒæ¨èçš„æ˜¯<code>å®ç°Runnableæ¥å£</code>çš„è¿™ç§æ–¹å¼ã€‚</p><p><code>Thread</code>æœ¬èº«æ˜¯å®ç°äº†<code>Runnable</code>æ¥å£çš„ï¼Œè°ƒç”¨<code>start()</code>æ–¹æ³•ä¼šæ–°å»ºä¸€ä¸ªçº¿ç¨‹(è¿™ä¸ªé€»è¾‘å­˜åœ¨äºnativeæ–¹æ³•<code>start0</code>ä¸­)å¹¶è®©æ­¤çº¿ç¨‹è°ƒç”¨<code>run()</code>æ–¹æ³•ã€‚</p><h3 id="ç»§æ‰¿threadç±»" tabindex="-1"><a class="header-anchor" href="#ç»§æ‰¿threadç±»" aria-hidden="true">#</a> ç»§æ‰¿Threadç±»</h3><p>åˆ›å»ºçº¿ç¨‹ç›´æ¥ç®€å•çš„æ–¹å¼å°±æ˜¯ï¼šé€šè¿‡ç»§æ‰¿Threadç±»ï¼Œé‡å†™<code>run()</code>æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello from a thread!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> helloThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HelloThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        helloThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In main thread.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šä¸è¦ç”¨<code>run()</code>æ¥å¯åŠ¨æ–°çº¿ç¨‹(å› ä¸ºæ²¡æœ‰è°ƒç”¨nativeæ–¹æ³•<code>start0</code>å¯åŠ¨çº¿ç¨‹)ã€‚å®ƒåªä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­ä¸²è¡Œåœ°æ‰§è¡Œ<code>run()</code>ä¸­çš„ä»£ç ã€‚</p><h3 id="å®ç°runnableæ¥å£" tabindex="-1"><a class="header-anchor" href="#å®ç°runnableæ¥å£" aria-hidden="true">#</a> å®ç°Runnableæ¥å£</h3><p>ä¸Šé¢æ˜¯é€šè¿‡ç»§æ‰¿æ–¹å¼æ¥åˆ›å»ºçº¿ç¨‹çš„ï¼Œå…¶å®<code>Thread</code>ç±»æä¾›äº†<code>Runnable</code>çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºçº¿ç¨‹ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> <span class="token string">&quot;Thread-&quot;</span> <span class="token operator">+</span> <span class="token function">nextThreadNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„é€ å‡½æ•°æŠŠ<code>Runnable</code>å‚æ•°è®¾ç½®æˆThreadçš„å±€éƒ¨å˜é‡<code>target</code>ã€‚ä¹‹æ‰€ä»¥ä¸ç”¨é‡å†™Threadç±»çš„<code>run()</code>æ–¹æ³•ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Threadé»˜è®¤çš„<code>run()</code>æ–¹æ³•ï¼Œå¦‚æœtargetæœ‰å€¼çš„è¯ï¼Œå°±ä¼šè°ƒç”¨targeté‡Œé¢çš„<code>run</code>æ–¹æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬åªéœ€å®ç°Runnableæ¥å£ï¼Œç„¶åæŠŠè¿™ä¸ªæ¥å£ä½œä¸ºå‚æ•°ä¼ é€’ç»™Threadå³å¯ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello from a thread!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HelloRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In main method.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹‹æ‰€ä»¥æ¨å´‡ä½¿ç”¨<code>å®ç°Runnableæ¥å£</code>è¿™ç§æ–¹å¼ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><ul><li>Java ä¸­çš„ç±»åªèƒ½å•ç»§æ‰¿å´å¯ä»¥å¤šå®ç°</li><li>å°†<code>Runnable</code>ä»»åŠ¡ä¸æ‰§è¡Œè¯¥ä»»åŠ¡çš„<code>Thread</code>å¯¹è±¡åˆ†å¼€ï¼Œæ›´åŠ çš„é€šç”¨çµæ´»</li></ul><h2 id="çº¿ç¨‹çš„æš‚åœ" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹çš„æš‚åœ" aria-hidden="true">#</a> çº¿ç¨‹çš„æš‚åœ</h2><p><code>Thread.sleep</code>æ–¹æ³•ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹æš‚åœæ‰§è¡Œä¸€æ®µæŒ‡å®šçš„æ—¶é—´ã€‚è¿™æ˜¯ä¸€ç§ä½¿å¤„ç†å™¨æ—¶é—´å¯ç”¨äºåº”ç”¨ç¨‹åºçš„å…¶ä»–çº¿ç¨‹æˆ–å¯èƒ½åœ¨è®¡ç®—æœºç³»ç»Ÿä¸Šè¿è¡Œçš„å…¶ä»–åº”ç”¨ç¨‹åºçš„æœ‰æ•ˆæ–¹æ³•ã€‚</p><p>å½“ç„¶sleepæ—¶é—´ä¸èƒ½ä¿è¯ç²¾ç¡®ï¼Œå› ä¸ºå®ƒä»¬å—åˆ°åº•å±‚æ“ä½œç³»ç»Ÿæä¾›çš„è®¾æ–½çš„é™åˆ¶ï¼Œæ­¤å¤–åœ¨ç¡çœ æœŸé—´è¿˜å¯ä»¥è¢«ä¸­æ–­ç»ˆæ­¢ã€‚æ— è®ºå¦‚ä½•ï¼Œæ‚¨ä¸èƒ½å‡è®¾è°ƒç”¨<code>sleep</code>ä¼šå°†çº¿ç¨‹æš‚åœæŒ‡å®šçš„æ—¶é—´æ®µã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SleepThread</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In t thread, Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In main thread, Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>è°ƒç”¨<code>sleep()</code>çš„æ—¶å€™ï¼Œé”å¹¶æ²¡æœ‰é‡Šæ”¾ã€‚æ‰€ä»¥<code>t</code>çº¿ç¨‹åœ¨ç¡çœ æœŸé—´ï¼Œæ˜¯æ²¡æœ‰é‡Šæ”¾é”çš„ã€‚</p></div><h2 id="çº¿ç¨‹çš„ç»ˆæ­¢" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹çš„ç»ˆæ­¢" aria-hidden="true">#</a> çº¿ç¨‹çš„ç»ˆæ­¢</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œçº¿ç¨‹åœ¨æ‰§è¡Œå®Œæ¯•åå°±ä¼šç»“æŸï¼Œæ— é¡»æ‰‹å·¥å…³é—­ã€‚ä½†æ˜¯Jdkä¸­Threadç±»æä¾›äº†ä¸€ä¸ª<code>stop()</code>çš„æ–¹æ³•ç”¨ä»¥ç«‹å³ç»ˆæ­¢çº¿ç¨‹ã€‚<mark>è¿™ä¸ªæ–¹æ³•è¢«åºŸå¼ƒï¼Œæä¸æ¨èä½¿ç”¨</mark>ã€‚<code>stop</code>æ–¹æ³•å¤ªè¿‡äºæš´åŠ›ï¼Œå¼ºè¡ŒæŠŠæ‰§è¡Œåˆ°ä¸€åŠçš„çº¿ç¨‹ç»ˆæ­¢ï¼Œå¯èƒ½ä¼šå¼•èµ·ä¸€äº›æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p><p>ä»¥ä¸‹ç»™å‡ºä¸€ä¸ªä¾‹å­æ¥åŠ ä»¥è¯´æ˜ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StopThread</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;huhx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hubei&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            person<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;linux&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            person<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;beijing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;username = %s and address = %s%n&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> person<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœæ˜¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>username <span class="token operator">=</span> linux and address <span class="token operator">=</span> hubei
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨çº¿ç¨‹<code>t</code>ä¸­å»ä¿®æ”¹personå®ä¾‹ï¼Œåœ¨ä¿®æ”¹å®Œ<code>username</code>ï¼Œæˆ‘ä»¬åœ¨<code>main</code>çº¿ç¨‹è°ƒç”¨<code>t.stop()</code>æ¥ç»ˆæ­¢çº¿ç¨‹<code>t</code>ï¼Œè¿™å¯¼è‡´12è¡Œçš„<code>setAddress</code>æ²¡èƒ½æ‰§è¡Œã€‚è¿™å°±å¯¼è‡´äº†personè¿™ä¸ªå®ä¾‹åªæ˜¯æ›´æ–°äº†<code>username</code>ï¼Œè€Œ<code>address</code>æ²¡èƒ½å¾—åˆ°æ›´æ–°ã€‚(ä¸Šè¿°æµç¨‹ï¼Œæˆ‘ä»¬ä½¿ç”¨sleepæ¥æ¨¡æ‹Ÿç°å®ä¸­çš„åœé¡¿æˆ–è€…è´¹æ—¶æ“ä½œ)</p><p>åœ¨çœŸå®çš„åœºæ™¯ä¸‹è¿™ä¸ªé—®é¢˜å¯èƒ½ä¼šæ›´ä¸¥é‡ã€‚æ¯”å¦‚è¯´è½¬è´¦ä¸šåŠ¡Aå‘Bè½¬è´¦ï¼ŒAçš„é’±è¢«æ‰£äº†ï¼Œè¿™æ—¶è½¬è´¦çš„çº¿ç¨‹è¢«ç»ˆæ­¢ï¼Œé’±æ²¡èƒ½è½¬åˆ°å¯¹æ–¹è´¦æˆ·Bä¸Šé¢ã€‚ğŸ¥¶</p><h2 id="çº¿ç¨‹çš„ä¸­æ–­" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹çš„ä¸­æ–­" aria-hidden="true">#</a> çº¿ç¨‹çš„ä¸­æ–­</h2><p>ä¸Šé¢æåˆ°<code>stop()</code>ç»ˆæ­¢çº¿ç¨‹è¿‡äºæš´åŠ›è€Œè¢«æ‰“å…¥å†·å®«ï¼Œé‚£ä¹ˆåœ¨JDKæœ‰æ›´å¥½çš„ç»ˆæ­¢çº¿ç¨‹çš„æ–¹å¼å—ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œé‚£å°±æ˜¯çº¿ç¨‹ä¸­æ–­ã€‚</p><p>åœ¨Javaä¸­çº¿ç¨‹ä¸­æ–­æ˜¯ä¸€ç§é‡è¦çš„çº¿ç¨‹åä½œæœºåˆ¶ã€‚å®ƒå¹¶ä¸ä¼šä½¿çº¿ç¨‹ç«‹å³é€€å‡ºï¼Œè€Œæ˜¯ç»™çº¿ç¨‹å‘é€ä¸€ä¸ªé€šçŸ¥ï¼Œå‘ŠçŸ¥ç›®æ ‡çº¿ç¨‹æœ‰äººå¸Œæœ›ä½ é€€å‡ºå•¦ï¼è‡³äºç›®æ ‡çº¿ç¨‹æ¥åˆ°é€šçŸ¥åå¦‚ä½•å¤„ç†ï¼Œåˆ™å®Œå…¨ç”±ç›®æ ‡çº¿ç¨‹è‡ªè¡Œå†³å®šã€‚</p><p>ä¸­æ–­æœºåˆ¶æ˜¯ä½¿ç”¨ç§°ä¸ºä¸­æ–­çŠ¶æ€çš„å†…éƒ¨æ ‡å¿—æ¥å®ç°çš„ï¼Œä¸ä¹‹ç›¸å…³çš„æœ‰ä»¥ä¸‹ä¸‰ä¸ª<code>Threadç±»</code>ä¸­çš„æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>interrupt()</code>æ–¹æ³•è®¾ç½®ç›®æ ‡çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¸º<code>true</code>ï¼Œå¹¶é€šçŸ¥Jvmä¸­æ–­ç›®æ ‡çº¿ç¨‹</li><li><code>isInterrupted()</code>æ–¹æ³•è¿”å›ç›®æ ‡çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€</li><li><code>interrupted()</code>æ–¹æ³•è¿”å›ç›®æ ‡çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œå¹¶è®¾ç½®å½“å‰ä¸­æ–­çŠ¶æ€ä¸º<code>false</code></li></ul><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ä¸Šè¿°å‡ ä¸ªæ–¹æ³•çš„ä½¿ç”¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterruptThread</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> interrupted <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>interrupted<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In t thread, Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before interrupt: &quot;</span> <span class="token operator">+</span> t<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;After interrupt: &quot;</span> <span class="token operator">+</span> t<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In main thread, Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Before</span> interrupt<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token boolean">false</span>
<span class="token class-name">In</span> t thread<span class="token punctuation">,</span> <span class="token class-name">Hello</span>
<span class="token class-name">After</span> interrupt<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token class-name">In</span> main thread<span class="token punctuation">,</span> <span class="token class-name">Hello</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹<code>t</code>ï¼Œåœ¨<code>t.interrupt()</code>ä¸­æ–­æ–¹æ³•ä¹‹å‰ï¼Œä½¿ç”¨<code>isInterrupted()</code>æŸ¥è¯¢çº¿ç¨‹<code>t</code>çš„ä¸­æ–­çŠ¶æ€ä¸º<code>false</code>ï¼Œè€Œä¹‹åçº¿ç¨‹<code>t</code>çš„ä¸­æ–­çŠ¶æ€ä¸º<code>true</code>ã€‚</p><p>åœ¨<code>t.interrupt()</code>æ–¹æ³•è¢«è°ƒç”¨ï¼Œä¸­æ–­æ­£åœ¨ç¡çœ å½“ä¸­çš„çº¿ç¨‹<code>t</code>ï¼Œå¯¼è‡´çº¿ç¨‹<code>t</code>æŠ›å‡º<code>InterruptedException</code>å¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨<code>catch</code>å—ä¸­ä½¿ç”¨<code>Thread.interrupted()</code>é™æ€æ–¹æ³•æŸ¥è¯¢å½“å‰çº¿ç¨‹ä¹Ÿå°±æ˜¯çº¿ç¨‹<code>t</code>çš„ä¸­æ–­çŠ¶æ€ï¼Œç»“æœä¸º <code>false</code>ã€‚è¿™æ˜¯å› ä¸ºåœ¨javaä¸­ï¼Œä»»ä½•é€šè¿‡æŠ›å‡º<code>InterruptedException</code>é€€å‡ºçš„æ–¹æ³•(æ¯”å¦‚<code>sleep()</code>ã€<code>wait()</code>å’Œ<code>join()</code>æ–¹æ³•)ï¼Œéƒ½ä¼šæ¸…é™¤ä¸­æ–­æ ‡è®°ã€‚</p><p>å½“ä¸€ä¸ªçº¿ç¨‹è¢«ä¸­æ–­ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥åœ¨<code>catch</code>è¯­å¥ä¸­è‡ªè¡Œå†³å®šè¢«ä¸­æ–­çš„é€»è¾‘ï¼Œæ˜¯ç»ˆæ­¢çº¿ç¨‹è¿˜æ˜¯å¦åšå…¶ä»–éƒ½æ˜¯å¯ä»¥çš„ã€‚ä¸Šè¿°çš„ä¾‹å­æˆ‘ä»¬åªæ˜¯ç®€å•çš„æ‰“å°å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚</p><h2 id="çº¿ç¨‹waitå’Œnotify" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹waitå’Œnotify" aria-hidden="true">#</a> çº¿ç¨‹waitå’Œnotify</h2><p>ä¸ºäº†æ”¯æŒå¤šçº¿ç¨‹ä¹‹é—´çš„åä½œï¼ŒJDKæä¾›äº†ä¸¤ä¸ªéå¸¸é‡è¦çš„çº¿ç¨‹ç­‰å¾…<code>wait()</code>æ–¹æ³•å’Œé€šçŸ¥<code>notify()</code>æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•å¹¶ä¸æ˜¯åœ¨<code>Thread</code>ç±»ä¸­çš„ï¼Œè€Œæ˜¯å½’å±äº<code>Object</code>ç±»ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> wait <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> 

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">void</span> notify <span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®é™…ä¸Šï¼Œåªèƒ½åœ¨<code>synchronzied</code>è¯­å¥ä¸­è°ƒç”¨<code>wait()</code>ã€<code>notify()</code>å’Œ<code>notifyAll()</code>æ–¹æ³•ã€‚å¦‚æœåœ¨é<code>synchronzied</code>è¯­å¥ä¸­è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥ç¼–è¯‘ä½†æ˜¯è¿è¡Œçš„æ—¶å€™ä¼šæŠ›å‡ºå¼‚å¸¸<code>IllegalMonitorStateException</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Exception</span> in thread <span class="token string">&quot;main&quot;</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>IllegalMonitorStateException</span><span class="token operator">:</span> current thread is not owner
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ„æ€æ˜¯ï¼š<mark>è¿™äº›æ–¹æ³•çš„è°ƒç”¨ä¹‹å‰å¿…é¡»è·å¾—ç›®æ ‡å¯¹è±¡çš„ä¸€ä¸ªé”</mark>ã€‚</p><p>ä»¥ä¸‹æˆ‘ä»¬ç”¨ä¸€ä¸ªäº‹ä¾‹æ¥è¯´æ˜ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WaitNotifyThread</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> waitThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">WaitNotifyThread</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before wait: &quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">WaitNotifyThread</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after wait: &quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        waitThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;waitThread state: &quot;</span> <span class="token operator">+</span> waitThread<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> notifyThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">WaitNotifyThread</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before notify: &quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">WaitNotifyThread</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;waitThread state: &quot;</span> <span class="token operator">+</span> waitThread<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after notify: &quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        notifyThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šç¨‹åºçš„è¾“å‡ºç»“æœï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>before wait<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">31.104650</span>
waitThread state<span class="token operator">:</span> <span class="token constant">WAITING</span>
before notify<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">33.096438</span>
waitThread state<span class="token operator">:</span> <span class="token constant">BLOCKED</span>
after notify<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">36.099898</span>
after wait<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T21</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">36.100387</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨<code>main</code>çº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºçº¿ç¨‹<code>waitThread</code>å¹¶å¯åŠ¨ã€‚çº¿ç¨‹<code>waitThread</code>é¦–å…ˆè·å¾—<code>WaitNotifyThread.class</code>çš„é”å¹¶è¿›å…¥åˆ°synchronizedå—ä¸­ï¼Œè°ƒç”¨äº†<code>wait()</code>æ–¹æ³•è¿›å…¥äº†ç­‰å¾…çŠ¶æ€ï¼Œçº¿ç¨‹è¢«æŒ‚èµ·ï¼Œè€Œé”è¢«é‡Šæ”¾(è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œè¿™æ ·å…¶ä»–çº¿ç¨‹å°±å¯ä»¥æ‹¿åˆ°é”æ¥å”¤é†’æ­¤çº¿ç¨‹äº†ğŸ¤ª)ï¼Œæ­¤æ—¶<code>waitThread</code>çº¿ç¨‹å¤„äº<code>WAITING</code>çŠ¶æ€ã€‚</p><p>åœ¨2ç§’ä¹‹åï¼Œ<code>notifyThread</code>çº¿ç¨‹è¢«åˆ›å»ºè¿è¡Œã€‚ç”±äº<code>waitThread</code>å·²ç»é‡Šæ”¾äº†é”ï¼Œ<code>notifyThread</code>æ‹¿åˆ°<code>WaitNotifyThread.class</code>çš„é”å¹¶è¿›å…¥synchronizedå—ä¸­ã€‚<code>notify()</code>æ–¹æ³•è¢«è°ƒç”¨ï¼Œå°†å°è¯•å”¤é†’åœ¨<code>WaitNotifyThread.class</code>ä¸Šé¢ç¡çœ çš„æŸä¸€ä¸ªçº¿ç¨‹(åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¯¥çº¿ç¨‹å°±æ˜¯waitThread)ã€‚</p><p><code>waitThread</code>æ¥æ”¶åˆ°<code>notifyThread</code>çº¿ç¨‹çš„å”¤é†’ï¼Œè¦åšçš„ç¬¬ä¸€ä»¶äº‹å¹¶ä¸æ˜¯æ‰§è¡Œåç»­çš„ä»£ç ï¼Œè€Œæ˜¯è¦å°è¯•é‡æ–°è·å¾—<code>WaitNotifyThread.class</code>çš„é”ã€‚å¦‚æœæš‚æ—¶æ— æ³•è·å¾—ï¼Œ<code>waitThread</code>è¿˜å¿…é¡»è¦ç­‰å¾…è¿™ä¸ªé”ï¼Œæ­¤æ—¶<code>waitThread</code>å¤„äº<code>BLOCKED</code>çŠ¶æ€ã€‚ä»ä¸Šè¿°è¾“å‡ºæ¥çœ‹<code>waitThread</code>è¢«å”¤é†’è¿˜ç­‰äº†3ç§’æ‰æ‹¿åˆ°äº†é”(è¿™æ˜¯å› ä¸º<code>notifyThread</code>çº¿ç¨‹sleepäº†3ç§’ï¼Œåé¢æ‰§è¡Œå®Œé‡Šæ”¾äº†é”)ã€‚</p><p>å½“é”è¢«æˆåŠŸè·å¾—åï¼Œ<code>waitThread</code>çº¿ç¨‹æ¥ç€è¿è¡Œï¼Œæ‰€ä»¥æœ‰è¾“å‡ºï¼š<code>after wait</code>ã€‚</p><p>å…¶å®<code>wait</code>æ–¹æ³•ä¹Ÿæœ‰å…¶å¯ä»¥æŒ‡å®šè¶…æ—¶æ—¶é—´çš„é‡è½½æ–¹æ³•ï¼Œå¦‚æœä¿®æ”¹ç¨‹åºå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">WaitNotifyThread</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// before</span>

<span class="token class-name">WaitNotifyThread</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// modified</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶<code>waitThread</code>è¦ä¹ˆè¢«å…¶ä»–çº¿ç¨‹é€šçŸ¥å”¤é†’ï¼Œè¦ä¹ˆè¿‡<code>10æ¯«ç§’</code>è‡ªè¡Œå°è¯•é†’æ¥ã€‚è€Œä¸”ç”±äº<code>notifyThread</code>è¿˜æ²¡æœ‰åˆ›å»ºæœªå æ®é”ï¼Œé”ç«‹é©¬è¢«<code>waitThread</code>å†æ¬¡æ‹¿åˆ°ç„¶åç»§ç»­æ‰§è¡Œã€‚æ­¤æ—¶è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>before wait<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T21</span><span class="token operator">:</span><span class="token number">34</span><span class="token operator">:</span><span class="token number">40.468331</span>
after wait<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T21</span><span class="token operator">:</span><span class="token number">34</span><span class="token operator">:</span><span class="token number">40.481307</span>
waitThread state<span class="token operator">:</span> <span class="token constant">TERMINATED</span>
before notify<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T21</span><span class="token operator">:</span><span class="token number">34</span><span class="token operator">:</span><span class="token number">42.456399</span>
waitThread state<span class="token operator">:</span> <span class="token constant">TERMINATED</span>
after notify<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T21</span><span class="token operator">:</span><span class="token number">34</span><span class="token operator">:</span><span class="token number">45.461708</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…³äº<code>notify</code>ä¸<code>notifyAll</code>æ–¹æ³•çš„åŒºåˆ«ï¼Œå‚è€ƒï¼š<a href="#notify%E4%B8%8Enotifyall%E7%9A%84%E5%8C%BA%E5%88%AB">notifyä¸notifyAll</a></p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p><code>wait</code>æ–¹æ³•ä¼šé‡Šæ”¾é”ï¼Œ<code>notify</code>å’Œ<code>notifyAll</code>æ–¹æ³•è°ƒç”¨ä¸ä¼šé‡Šæ”¾é”ã€‚</p></div><h2 id="çº¿ç¨‹ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹ä¼˜å…ˆçº§" aria-hidden="true">#</a> çº¿ç¨‹ä¼˜å…ˆçº§</h2><p>çº¿ç¨‹çš„ä¼˜å…ˆçº§å°†è¯¥çº¿ç¨‹çš„é‡è¦æ€§ä¼ é€’ç»™äº†è°ƒåº¦å™¨ï¼Œè°ƒåº¦å™¨å°†å€¾å‘äºè®©ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å…ˆå¾—åˆ°æ‰§è¡Œã€‚ä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—ä¸åˆ°æ‰§è¡Œï¼Œåªæ˜¯å®ƒçš„æ‰§è¡Œé¢‘ç‡æˆ–è€…æœºä¼šè¾ƒä½ï¼Œé«˜ä¼˜å…ˆçº§çº¿ç¨‹ä¹Ÿå¯èƒ½ä¹Ÿä¼šæŠ¢å å¤±è´¥ã€‚</p>`,66),d=n("p",null,[s("Jdkæœ‰"),n("code",null,"10"),s("ä¸ªä¼˜å…ˆçº§ï¼Œä½†æ˜¯ä¸å¤šæ•°æ“ä½œç³»ç»Ÿéƒ½ä¸èƒ½å¾ˆå¥½çš„æ˜ å°„("),n("code",null,"Window"),s("ä¸Šé¢æœ‰7ä¸ªä¼˜å…ˆçº§ä¸”ä¸å›ºå®šï¼Œ"),n("code",null,"Salaris"),s("æœ‰"),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("msup",null,[n("mn",null,"2"),n("mn",null,"31")])]),n("annotation",{encoding:"application/x-tex"},"2^{31}")])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8141em"}}),n("span",{class:"mord"},[n("span",{class:"mord"},"2"),n("span",{class:"msupsub"},[n("span",{class:"vlist-t"},[n("span",{class:"vlist-r"},[n("span",{class:"vlist",style:{height:"0.8141em"}},[n("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[n("span",{class:"pstrut",style:{height:"2.7em"}}),n("span",{class:"sizing reset-size6 size3 mtight"},[n("span",{class:"mord mtight"},[n("span",{class:"mord mtight"},"31")])])])])])])])])])])]),s("ä¸ªä¼˜å…ˆçº§)ã€‚è€Œä¸”çº¿ç¨‹çš„ä¼˜å…ˆçº§è°ƒåº¦å’Œåº•å±‚æ“ä½œç³»ç»Ÿæœ‰å¯†åˆ‡çš„å…³ç³»ï¼Œåœ¨å„ä¸ªå¹³å°ä¸Šè¡¨ç°ä¸ä¸€ï¼Œå¹¶ä¸”è¿™ç§ä¼˜å…ˆçº§äº§ç”Ÿçš„åæœä¹Ÿå¯èƒ½ä¸å®¹æ˜“é¢„æµ‹ï¼Œæ— æ³•ç²¾å‡†æ§åˆ¶ã€‚")],-1),r=a(`<p>ä¼˜å…ˆçº§çš„æ•°å­—è¶Šå¤§åˆ™ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå®ƒçš„æœ‰æ•ˆèŒƒå›½åœ¨1åˆ°10ä¹‹é—´ã€‚ä»¥ä¸‹æ˜¯<code>Thread</code>ç±»å†…ç½®çš„ä¼˜å…ˆçº§å¸¸é‡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">MNI_PRIORITY</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token class-name">NORM</span> <span class="token constant">PRIORITY</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> 
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token constant">MAX_PRIORITY</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">Note</p><p>åœ¨ç»å¤§å¤šæ•°æ—¶é—´é‡Œï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½åº”è¯¥ä»¥é»˜è®¤çš„ä¼˜å…ˆçº§è¿è¡Œï¼Œè¯•å›¾æ“çºµçº¿ç¨‹ä¼˜å…ˆçº§é€šå¸¸æ˜¯ä¸€ä¸ªé”™è¯¯çš„é€‰æ‹©ã€‚</p></div><h2 id="çº¿ç¨‹joinå’Œyield" tabindex="-1"><a class="header-anchor" href="#çº¿ç¨‹joinå’Œyield" aria-hidden="true">#</a> çº¿ç¨‹joinå’Œyield</h2><h3 id="joinæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#joinæ–¹æ³•" aria-hidden="true">#</a> joinæ–¹æ³•</h3><p><code>join</code>æ–¹æ³•å…è®¸ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„å®Œæˆã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JoinThread</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In t thread: &quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In main thread: &quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯<code>main</code>ï¼Œå¦ä¸€ä¸ªæ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„<code>t</code>ã€‚å½“æˆ‘ä»¬è°ƒç”¨<code>t.join()</code>ä¼šå¯¼è‡´<code>main</code>çº¿ç¨‹æš‚åœç›´åˆ°<code>t</code>çº¿ç¨‹ç»“æŸã€‚æ‰€ä»¥ä¸Šé¢çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">In</span> t thread<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T20</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">07.515364</span>
<span class="token class-name">In</span> main thread<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">14</span><span class="token constant">T20</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">07.517288</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>join</code>è¿˜æœ‰äº›å¸¦<code>è¶…æ—¶å‚æ•°</code>çš„é‡è½½æ–¹æ³•ï¼Œè¿™äº›é‡è½½æ–¹æ³•å…è®¸ç¨‹åºå‘˜æŒ‡å®šç­‰å¾…æ—¶é—´ã€‚ä½†æ˜¯ä¸<code>sleep</code>ä¸€æ ·ä¼šä¾èµ–äºæ“ä½œç³»ç»Ÿçš„è®¡æ—¶ï¼Œå› æ­¤æ‚¨ä¸åº”å‡è®¾<code>join</code>å°†å®Œå…¨ç­‰å¾…æ‚¨æŒ‡å®šçš„æ—¶é—´ã€‚</p><h3 id="yieldæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#yieldæ–¹æ³•" aria-hidden="true">#</a> yieldæ–¹æ³•</h3><p><code>yield</code>æ–¹æ³•çš„ä½œç”¨æ˜¯æ”¾å¼ƒå½“å‰çš„CPUèµ„æºï¼Œå°†å®ƒè®©ç»™å…¶å®ƒçš„ä»»åŠ¡å»å ç”¨CPUæ‰§è¡Œæ—¶é—´ã€‚ä½†æ”¾å¼ƒçš„æ—¶é—´ä¸ç¡®å®šï¼Œæœ‰å¯èƒ½åˆšåˆšæ”¾å¼ƒï¼Œé©¬ä¸Šåˆè·å¾—CPUæ—¶é—´ç‰‡ã€‚</p><p>è°ƒç”¨<code>yield</code>é™æ€æ–¹æ³•æ˜¯å‘è°ƒåº¦ç¨‹åºæç¤ºå½“å‰çº¿ç¨‹æ„¿æ„è®©å‡ºå…¶å½“å‰å¯¹å¤„ç†å™¨çš„ä½¿ç”¨ï¼Œä½†æ˜¯è°ƒåº¦ç¨‹åºå¯ä»¥å¿½ç•¥è¿™ä¸ªæç¤ºã€‚</p><p><code>yield</code>æ˜¯ä¸€ç§å¯å‘å¼å°è¯•ï¼Œæ—¨åœ¨æ”¹å–„çº¿ç¨‹ä¹‹é—´çš„ç›¸å¯¹è¿›åº¦ï¼Œå¦åˆ™ä¼šè¿‡åº¦åˆ©ç”¨<code>CPU</code>ã€‚å®ƒçš„ä½¿ç”¨åº”è¯¥ä¸è¯¦ç»†çš„åˆ†æå’ŒåŸºå‡†æµ‹è¯•ç›¸ç»“åˆï¼Œä»¥ç¡®ä¿å®ƒç¡®å®å…·æœ‰é¢„æœŸçš„æ•ˆæœã€‚</p><p>ä»¥ä¸‹æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç¤ºä¾‹æ¥è¯´æ˜ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">YieldThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
    <span class="token class-name">YieldThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YieldThread</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YieldThread</span><span class="token punctuation">(</span><span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæˆ‘ä»¬åˆ›å»ºçº¿ç¨‹<code>t1</code>å’Œçº¿ç¨‹<code>t2</code>ï¼Œä¸¤ä¸ªçº¿ç¨‹è¿è¡ŒåŒæ ·çš„ä»£ç ï¼šéå†æ‰“å°<code>0åˆ°10</code>çš„æ•°å­—ï¼Œå¹¶åœ¨<code>index</code>ä¸ºå¶æ•°çš„æ—¶å€™ï¼Œè°ƒç”¨<code>Thread.yield()</code>æ”¾å¼ƒå½“å‰çš„CPUèµ„æºã€‚</p><p>è¾“å‡ºä¸ç¡®å®š(å¤§éƒ¨åˆ†æƒ…å†µä¸¤ä¸ªçº¿ç¨‹æ˜¯äº¤æ›¿æ‰§è¡Œ)ï¼ŒæŸä¸€æ¬¡çš„ç»“æœä¸º:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>t1<span class="token operator">:</span> <span class="token number">0</span> 
t1<span class="token operator">:</span> <span class="token number">1</span> 
t1<span class="token operator">:</span> <span class="token number">2</span> 
t2<span class="token operator">:</span> <span class="token number">0</span> 
t1<span class="token operator">:</span> <span class="token number">3</span> 
t2<span class="token operator">:</span> <span class="token number">1</span> 
t1<span class="token operator">:</span> <span class="token number">4</span> 
t2<span class="token operator">:</span> <span class="token number">2</span> 
t1<span class="token operator">:</span> <span class="token number">5</span> 
t2<span class="token operator">:</span> <span class="token number">3</span> 
t1<span class="token operator">:</span> <span class="token number">6</span> 
t2<span class="token operator">:</span> <span class="token number">4</span> 
t1<span class="token operator">:</span> <span class="token number">7</span> 
t2<span class="token operator">:</span> <span class="token number">5</span> 
t1<span class="token operator">:</span> <span class="token number">8</span> 
t2<span class="token operator">:</span> <span class="token number">6</span> 
t1<span class="token operator">:</span> <span class="token number">9</span> 
t2<span class="token operator">:</span> <span class="token number">7</span> 
t2<span class="token operator">:</span> <span class="token number">8</span> 
t2<span class="token operator">:</span> <span class="token number">9</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ç»“æœå¯ä»¥å¾—çŸ¥ï¼Œåˆšå¼€å§‹<code>t1</code>çº¿ç¨‹æ‰§è¡Œäº†<code>012</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å½“çº¿ç¨‹<code>t1</code>æ‰§è¡Œåˆ°<code>i=0</code>æ—¶ï¼Œæ‰“å°å¹¶è°ƒç”¨<code>Thread.yield()</code>è®©å‡ºè°ƒåº¦ã€‚ä½†æ˜¯ä¸‹ä¸€æ¬¡çš„æ‰§è¡Œæƒï¼Œè¿˜æ˜¯åˆ†ç»™äº†<code>t1</code>ï¼Œæ‰€ä»¥ç´§æ¥ç€æ‰“å°ï¼š<code>t1: 1</code>ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>yield</code>æ–¹æ³•å¯¹äºè°ƒè¯•æˆ–æµ‹è¯•ç›®çš„å¯èƒ½å¾ˆæœ‰ç”¨ï¼Œå®ƒå¯èƒ½æœ‰åŠ©äºé‡ç°ç”±äºç«äº‰æ¡ä»¶è€Œå¯¼è‡´çš„é”™è¯¯ã€‚åœ¨è®¾è®¡å¹¶å‘æ§åˆ¶ç»“æ„(ä¾‹å¦‚<code>java.util.concurrent.locks</code>åŒ…ä¸­çš„ç»“æ„)æ—¶ï¼Œå®ƒä¹Ÿå¯èƒ½å¾ˆæœ‰ç”¨ã€‚ä½†æ˜¯åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•å¾ˆå°‘æ˜¯åˆé€‚çš„ã€‚</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>è°ƒç”¨<code>yield()</code>çš„æ—¶å€™ï¼Œé”å¹¶æ²¡æœ‰é‡Šæ”¾ã€‚</p></div><h2 id="å®ˆæŠ¤çº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#å®ˆæŠ¤çº¿ç¨‹" aria-hidden="true">#</a> å®ˆæŠ¤çº¿ç¨‹</h2><p>æ‰€è°“å®ˆæŠ¤(Daemon)çº¿ç¨‹ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™åœ¨åå°æä¾›ä¸€ç§é€šç”¨æœåŠ¡çš„çº¿ç¨‹ï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶å™¨ã€JITçº¿ç¨‹å¯ä»¥ç†è§£ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</p><p>ä¸ä¹‹å¯¹åº”çš„æ˜¯ç”¨æˆ·çº¿ç¨‹ï¼Œå®ƒå¯ä»¥è®¤ä¸ºæ˜¯ç³»ç»Ÿçš„å·¥ä½œçº¿ç¨‹ï¼Œå®ƒä¼šå®Œæˆè¿™ä¸ªç¨‹åºåº”è¯¥è¦å®Œæˆçš„ä¸šåŠ¡æ“ä½œã€‚å½“è¿›ç¨‹ä¸­æ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šè‡ªåŠ¨é”€æ¯ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaemonThread</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;i = &quot;</span> <span class="token operator">+</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Main thread is end.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°æˆ‘ä»¬åˆ›å»ºçº¿ç¨‹<code>t</code>ï¼Œå¹¶è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚åœ¨çº¿ç¨‹<code>t</code>ä¸­ï¼Œæˆ‘ä»¬æ¯éš”ä¸€ç§’çš„æ‰“å°é€’å¢æ•°å­—ã€‚è€Œåœ¨<code>main</code>çº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬<code>sleep</code>5ç§’ä¹‹åå°±ä¼šé€€å‡ºã€‚æ‰€ä»¥è¿™ä¸ªåº”ç”¨ç¨‹åºä¸€å…±æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯å®ˆæŠ¤çº¿ç¨‹<code>t</code>ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨æˆ·çº¿ç¨‹<code>main</code>ã€‚æ‰€ä»¥åœ¨ç­‰åˆ°5ç§’ä¹‹å<code>main</code>çº¿ç¨‹çš„æ­£å¸¸é€€å‡ºï¼Œå®ˆæŠ¤çº¿ç¨‹<code>t</code>ä¹Ÿç›¸åº”çš„ç»“æŸäº†ã€‚</p><p>ç¨‹åºçš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>i <span class="token operator">=</span> <span class="token number">0</span>
i <span class="token operator">=</span> <span class="token number">1</span>
i <span class="token operator">=</span> <span class="token number">2</span>
i <span class="token operator">=</span> <span class="token number">3</span>
i <span class="token operator">=</span> <span class="token number">4</span>
<span class="token class-name">Main</span> thread is end<span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="faq" tabindex="-1"><a class="header-anchor" href="#faq" aria-hidden="true">#</a> FAQ</h2><h3 id="åœ¨æ„å»ºæ–¹æ³•é‡Œé¢å¯åŠ¨çº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#åœ¨æ„å»ºæ–¹æ³•é‡Œé¢å¯åŠ¨çº¿ç¨‹" aria-hidden="true">#</a> åœ¨æ„å»ºæ–¹æ³•é‡Œé¢å¯åŠ¨çº¿ç¨‹ï¼Ÿ</h3>`,31),k={href:"https://www.baeldung.com/java-thread-constructor",target:"_blank",rel:"noopener noreferrer"},v=a('<h3 id="notifyä¸notifyallçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#notifyä¸notifyallçš„åŒºåˆ«" aria-hidden="true">#</a> notifyä¸notifyAllçš„åŒºåˆ«ï¼Ÿ</h3><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><h2 id="å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒ" aria-hidden="true">#</a> å‚è€ƒ</h2>',3);function m(b,h){const t=e("ExternalLinkIcon");return o(),c("div",null,[u,d,r,n("p",null,[n("a",k,[s("https://www.baeldung.com/java-thread-constructor"),l(t)])]),v])}const w=p(i,[["render",m],["__file","thread-usage.html.vue"]]);export{w as default};
